# 函数

## 1.参数默认值

ES5函数无参数默认值，ES6可以

```javascript
function log(x, y = 'World') {
  console.log(x, y);
}

log('Hello') // Hello World
log('Hello', 'China') // Hello China
log('Hello', '') // Hello
```

注意，参数变量是默认声明的，所以不能用`let`或`const`再次声明。

```javascript
function foo(x) {
    let x = 1; // error
    const x = 2; // error
  }
```

另外，函数的参数默认值是在每次调用时都重新计算的，并不是只计算一次就赋给变量。

```javascript
let x = 99;
function foo(p = x + 1) {
  console.log(p);
}

foo() // 100

x = 1000;
foo() // 1001
```

## 2.参数默认值和解构赋值默认值的结合使用

这是解构默认值：

```javascript
function foo({x, y = 5}) {
  console.log(x, y);
}

foo({}) // undefined 5
foo({x: 1}) // 1 5
foo({x: 1, y: 2}) // 1 2
foo() // TypeError: Cannot read property 'x' of undefined
```

这是参数默认值加解构默认值：

```javascript
function foo({x, y = 5} = {}) {
  console.log(x, y);
}

foo() // undefined 5
```

如果没传参，就默认给传个空对象

再看下面的例子:

```javascript
// 写法一:解构默认值+参数默认值
function m1({x = 0, y = 0} = {}) {
  return [x, y];
}

// 写法二：无解构默认值，只有一个参数默认值
function m2({x, y} = { x: 0, y: 0 }) {
  return [x, y];
}

// 函数没有参数的情况
m1() // [0, 0]
m2() // [0, 0]

// x 和 y 都有值的情况
m1({x: 3, y: 8}) // [3, 8]
m2({x: 3, y: 8}) // [3, 8]

// x 有值，y 无值的情况
m1({x: 3}) // [3, 0]
m2({x: 3}) // [3, undefined]

// x 和 y 都无值的情况
m1({}) // [0, 0];
m2({}) // [undefined, undefined]

m1({z: 3}) // [0, 0]
m2({z: 3}) // [undefined, undefined]

```

注意：通常情况下，定义了默认值的参数，应该是函数的尾参数。

## 3.length属性

指定了默认值以后，函数的`length`属性，将返回没有指定默认值的参数个数。也就是说，指定了默认值后，`length`属性将失真。

```javascript
(function (a) {}).length // 1
(function (a = 5) {}).length // 0
(function (a, b, c = 5) {}).length // 2
```

